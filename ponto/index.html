<!DOCTYPE html>
<html ng-app="ponto">
  <head>
    <meta charset="utf-8">
    <title>Arrow Function => in ES6</title>
    <!-- Compiled and minified CSS -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="../bower_components/materialize/dist/css/materialize.min.css">
    <!-- Compiled and minified JavaScript -->
    <script src="../bower_components/jquery/dist/jquery.min.js"></script>
    <script src="../bower_components/materialize/dist/js/materialize.min.js"></script>
    <script src="../bower_components/angular/angular.min.js"></script>
    <script src="./controllers/app.js"></script>
    <script src="./controllers/timer.js"></script>

  </head>
<body ng-controller="PontoController">
  <div class="container">
    <div class="row">
        <div class="col s6">
	      <ul class="collection with-header">
	        <li class="collection-item">
	        	<div id="c">
	        		chegada :
	        		<span class='hour'></span>
	        		<a href="#!" class="send secondary-content"><i class="material-icons">query_builder</i></a>
	        	</div>
	        </li>
	        <li class="collection-item">
	        	<div id="sA">
	        		saida almoço  :
	        		<span class='hour'></span>
	        		<a href="#!" class="send secondary-content"><i class="material-icons">query_builder</i></a>
	        	</div>
	        </li>
	        <li class="collection-item">
	        	<div  id="cA">
	        		chegada almoço :
	        		<span class='est red-text accent-4'></span> 
	          		<span class='hour'></span>
	        		<a href="#!" class="send secondary-content"><i class="material-icons">query_builder</i></a>
	        	</div>
	        </li>
	        <li class="collection-item">
	        	<div id="s">
	        		saida :
	        		<span class='est red-text accent-4'></span> 
	          		<span class='hour'></span>
	        		<a href="#!" class="send secondary-content"><i class="material-icons">query_builder</i></a>
	        	</div>
	        </li>
	       	<li class="collection-item">
				<register-card ng-model="horaChegada" element-id="chegada" label="Chegada"></register-card>
				{{horaChegada}}
	        </li>
	      </ul>
        </div>
        <div class="col s6">
          <div class="row">
            <div class="col s12 m12">
              <div class="card-panel teal">
                <span class="white-text" id="total"><b>Total: </b></span><br>
                <span class="white-text" id="countdown"><b>Faltam: </b><span></span>
              </div>
            </div>
          </div>
        </div>
      </div>
  </div>
</body>

<script type="text/javascript">
//Notification.requestPermission();
/*
function spawnNotification(theBody,theIcon,theTitle) {
  var options = {
      body: theBody,
      icon: theIcon
  }
  var n = new Notification(theTitle,options);
}



  
  var startDate;
  var launchStart;
  var launchEnd;
  var endDate;
  var countdown;
  var timerFn;

  var endDateEst;

var register = (elem, date) => $(elem).html( `${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}` );

function startTimer(time) {
  timerFn = setInterval(timer,1000);
}



function stopTimer(){
  clearInterval(timerFn);
};


$(document).ready(function() {
  $('#c .send').on('click', function(){
    startDate = new Date();
    endDateEst = addDate(startDate, 'hour', 8);
    endDateEst = addDate(endDateEst, 'minute',  48);
    register('#c .hour',startDate);
    register('#s .est', endDateEst);
    $('#c .send').hide();
    startTimer( endDateEst.getTime() );
  });


  $('#sA .send').on('click', function(){
    $('#sA .send').hide();
    launchStart = new Date();
    register('#sA .hour',launchStart);
    register('#cA .est', addDate(launchStart, 'hour', 1));
    register('#s .est', addDate(endDateEst, 'hour', 1));
    stopTimer();
  });

  $('#cA .send').on('click', function(){
    $('#cA .send').hide();
    $('#cA .est').hide();
    launchEnd = new Date();
    register('#cA .hour',launchStart);
    startTimer( timerD );
  });


  $('#s .send').on('click', function(){
    endDate = new Date();
    $('#s .send').hide();
    register('#s .hour', endDate);
    var html = `${endDate.getHours() - startDate.getHours()}:${endDate.getMinutes() - startDate.getMinutes()}:${endDate.getSeconds() - startDate.getSeconds()}`;
    $('h4 span').html( html );
    stopTimer();
  });


});
*/
</script>
</html>